---
title: 'Automate Updating Lastmod in Hugo'
date: 2023-11-18T22:53:08+09:00
lastmod: "2023-11-19T00:00:08+09:00"
---
#TODO 파일 내용 설명하는 front matter 추가하기.

hugo에서 파일이 수정되었을 때 lastmod를 자동으로 업데이트하고 싶다. 방법은 수동,자동 방법이 있다. 

## 수동 방법

lastmod를 업데이트 하려면 기본적인 방법은 수동으로 하는 것.   

1. 포스트 수정
2. 수정할 때 lastmod 업데이트

문제점: 너무 귀찮다. 패스.

## 자동 방법

자동으로 하는 방법에는 여러 방법이 있을 것 같다. 
처음에 도입한 방법은 에디터에서 저장할 때 스크립트가 돌도록 했다. 
어떤 스크립트이냐?

- post 경로의 markdown 파일을 하나씩 체크한다.
- 어떤걸 체크? 시스템상 modified date 를 가져온다.
- 파일상의 lastmod와 비교한다.
- 어떻게 비교? 서로 다르면 lastmod를 업데이트 한다.

그러나 문제점이 있다. 실제 내용 변경 여부와 관계없이 파일의 마지막 수정 시간을 기준으로 하기 때문에, 
파일이 어떤 이유로든 (예를 들어, IDE의 자동 저장 기능에 의해) 수정되면 lastmod가 업데이트된다.

두번째 방법은 파일 내용의 해시를 사용할 수 있을 것이다.
파일의 해시값을 미리 저장해두고 파일이 변경되었는지 확인할 때 해시값을 비교해서 다르면 lastmod를 업데이트 하는 것이다. 
단점은 해시 파일이 생긴다는 것이다.

세번째 방법을 사용하기로 했다. 
세번째 방법은 깃훅을 이용하는 것이다. 
pre-commit을 이용해서 commit전에 lastmod를 업데이트 하도록 해준다.

